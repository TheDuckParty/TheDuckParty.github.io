<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Как я делал свой «3-в-ряд» | DuckParty&#39;s Blog</title>
<meta name="keywords" content="AI, Games">
<meta name="description" content="Если вы ещё не попробовали результат моих трудов, то милости прошу: https://t.me/ZenMatch3bot/game
Игры для расслабона Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug&amp;Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример Slow Roads: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.
Вообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое.">
<meta name="author" content="">
<link rel="canonical" href="https://theduckparty.github.io/2025/06/29-match-three/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://theduckparty.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://theduckparty.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://theduckparty.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://theduckparty.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://theduckparty.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://theduckparty.github.io/2025/06/29-match-three/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><style>
    @media screen and (min-width: 769px) {

         
        .post-content input[type="checkbox"]:checked~label>img {
            transform: scale(1.6);
            cursor: zoom-out;
            position: relative;
            z-index: 999;
        }

        .post-content img.zoomCheck {
            transition: transform 0.15s ease;
            z-index: 999;
            cursor: zoom-in;
        }
    }
</style><meta property="og:title" content="Как я делал свой «3-в-ряд»" />
<meta property="og:description" content="Если вы ещё не попробовали результат моих трудов, то милости прошу: https://t.me/ZenMatch3bot/game
Игры для расслабона Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug&amp;Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример Slow Roads: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.
Вообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://theduckparty.github.io/2025/06/29-match-three/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2025-06-29T10:00:00+02:00" />
<meta property="article:modified_time" content="2025-06-29T10:00:00+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Как я делал свой «3-в-ряд»"/>
<meta name="twitter:description" content="Если вы ещё не попробовали результат моих трудов, то милости прошу: https://t.me/ZenMatch3bot/game
Игры для расслабона Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug&amp;Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример Slow Roads: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.
Вообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://theduckparty.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Как я делал свой «3-в-ряд»",
      "item": "https://theduckparty.github.io/2025/06/29-match-three/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Как я делал свой «3-в-ряд»",
  "name": "Как я делал свой «3-в-ряд»",
  "description": "Если вы ещё не попробовали результат моих трудов, то милости прошу: https://t.me/ZenMatch3bot/game\nИгры для расслабона Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug\u0026amp;Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример Slow Roads: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.\nВообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое.",
  "keywords": [
    "AI", "Games"
  ],
  "articleBody": " Если вы ещё не попробовали результат моих трудов, то милости прошу: https://t.me/ZenMatch3bot/game\nИгры для расслабона Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug\u0026Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример Slow Roads: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.\nВообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое.\nДва события привели меня туда, где я нахожусь сейчас:\nПоявление платформы мини-приложений в Telegram.\nДрузья мне посоветовали скачать игру Township от Playrix.\nОдной из core-механик Тауншипа является мини-игра “три-в-ряд” (это не глагол). Конечно, семь тысяч разных уровней на квадратном поле сделать нереально, поэтому в итоге получается что-то типа такого:\nНекоторые уровни сложные (а бывают и специально сложные), “жизней” даётся всего пять штук, после чего жди 15 минут или плати специальные внутриигровые бабки, которых всегда мало, зато их можно купить за реальное бабло! Делать этого я, конечно, не буду.\nКак жадному игроку, мне не нравится монетизация в Township, но сам концепт match-3 довольно прикольный. “Вот бы сделать что-то подобное…” — подумал я и полез искать всё готовое. Но прежде, возник другой вопрос: “А где в это играть?”. Ну разумеется, веб! Эти все “3-в-ряд” отлично подходят под сенсорные экраны смартфонов. И с телегой можно потом как-нибудь состыковать, получив тот самый вебапп (mini app).\nПервой остановкой моей неуёмной мысли стал движок Godot. Почему-то показалось, что нужно брать полноценный игровой движок, “чтоб как у взрослых”. И вроде можно даже в JavaScript экспортировать. Далее я нашёл туториал по Годоту на официальном сайте, потыкал до середины первого проекта и пошёл дальше искать сразу нужное. И оно нашлось в виде целого плейлиста:\nСпойлер: я досмотрел до четвёртого видео и устал 😅\nТак дело не пойдёт, надо что-то придумать другое.\nКогда-то давно, на четвёртом курсе института, я делал в качестве “длинной лабы” игру Морской Бой для одного игрока под Android. Выглядело это убожество так:\nИ это вы ещё мой тогдашний код не видели! Но прикол в том, что игровое “поле” представляло из себя один-единственный canvas, на котором были нарисованы белые линии, формирующие клетки, а положение точек вычислялось как середина этих клеток. Короче, просто рисование по полотну квадратов и кругов заданных цветов и размеров.\nМожет быть, сделать что-то подобное? Тем более, что на дворе 2025-й год, у нас тут вовсю AI, LLM и вайб-кодинг. Так родилась вторая идея: “хочу игру, но не хочу код писать, пусть всё сделает ИИ”.\nРаботаю с Агентом Джуни Поскольку почти весь код я пишу в PyCharm от JetBrains, первым делом создал новый проект, положил туда пустой index.html и написал JetBrains Junie: “Хочу три-в-ряд, програмировывай!”\nЗнаете, оглядываясь назад, я понимаю, что первая версия была очень даже ничего!\nНо в таком виде даже самому играть неприятно. Поэтому я попросил Джуни сделать анимации. Предсказуемо, что-то пошло не так:\nМои дальнейшие попытки вразумить тупую железяку сделали только хуже. На очередной итерации получилось примерно так:\nЧтобы немного уменьшить размер контекста, я попросил AI разбить код по разным файлам, надеясь, что следующие правки будут точечными. Тем более, что Junie работает в агентском режиме, т.е. может сама находить нужные файлы и собирать контекст только из того, что надо.\nА потом случилось страшное:\nНа середине рефакторинга Джуни сказала “ой, квота превышена, иди-ка ты нахер”. При дальнейшем изучении оказалось, что “нахер” значит “до 9 июля”:\nНо мы только ведь начали…\nПрошу помощи у “Большой тройки” И имя им ChatGPT, Claude и Deepseek. С ними моё сотрудничество было коротким и безрезультативным: поскольку они работают в браузере, надо заранее давать весь контекст. Дашь меньше файлов — начнут творить дичь, подразумевая то, чего нет, или наоборот, не видя того, что уже написано. Дашь больше файлов — упрёшься в лимиты.\nСпустя где-то полчаса я начал получать ошибки уже в начале диалогов:\nПлатить $20 или даже больше чисто за то, чтобы Claude сгенерировал не одно сообщение, а три? Извольте. Может быть, попробовать локальные модели? Тоже плохо, в мой Мак залезет максимум на 15-20 миллиардов параметров, а это ничто по сравнению с облачными кластерами.\nИ тут я вспомнил про существование ещё одной LLM.\nТёмная лошадка Почему-то я мало слышу новостей про AI от Google, в основном только, что их Gemini предлагает добавлять клей в пиццу, портит поисковую выдачу и интегрируется со смартфонами Pixel лучше, чем Siri. А ещё у Гугла есть своя AI Studio, открыв которую можно увидеть очень интересные числа:\nМиллион токенов в контексте! Pro-модель! Да ещё и бесплатно! Да, на бесплатных юзерах Google планирует обучать новые модели, но мне это ведь и надо.\nДополнительно где-то в интернете я прочитал пример system instruction, чтобы нейронка не бросалась сразу генерировать чушь, а сначала задавала уточняющие вопросы, чтобы генерировать чушь ещё лучше:\nYou are smart AI Assistant named \u003cтут вставьте любое имя\u003e. You can answer in Russian, English and Serbian (follow user’s input). Before you answer, assess the uncertainty of your response. If it’s greater than 0.1, ask me clarifying questions until the uncertainty is 0.1 or lower.\nВ моём случае, я выбрал имя Ева и начал мучать бедную AI-женщину. Ева от меня получила старые исходники, собранные совместными усилиями Junie, ChatGPT и Claude (моего участия там почти не было) и сразу предложила некоторые исправления.\nСледующие пять с лишним часов я выступал в роли прокладки между окном с LLM и веб-хостингом, заливая новые версии и тестируя их, находя баги и докладывая о них нейронке.\nИ знаете, что я вам скажу — у Евы такой большой контекст, что я был в полнейшем восторге 🌚. Эта думающая нейротварь периодически ссылалась на замечания, сделанные в самом начале и вскользь, и даже если давала небольшие исправления по коду, то держала в “голове” весь проект.\nПервые несколько попыток оказались так себе, но я сменил тактику и начал давать буквально атомарные задачи, маленькими шажками. Четвёртый заход стал самым удачным, настолько, что вкладка в браузере выжрала 2 гигабайта оперативки от количества сообщений:\nНейронка действительно отличается от джуна-программиста. Если бы человеку я поставил первую задачу “сделай генерацию поля и логику “свапа”, т.е. обмена фишек местами”, то в случае с Gemini итерации были следующими:\nНарисуй поле 7х7\nТеперь заполни его фишками пяти разных цветов\nТеперь при нажатии на фишку добавь её визуальное выделение\nДалее сделай обмен фишек местами. Дополнительная логика не нужна.\nТеперь добавь анимацию обмена. Активная фишка должна пролетать над верхней.\nТеперь добавь логику вычисления мэтча\nИ так далее. Такой подход позволяет ИИ не метаться между подзадачами и фокусироваться на одной проблеме за раз, что и нужно.\nИз смешного: в один момент Ева начала упоминать, что “вот теперь моё решение сработает на 100%”, а когда я утверждал обратное, просто извинялась, но предлагала дальнейшие действия.\nПришлось даже “притормозить” AI, чтобы не делать рандомные правки. Кажется, что “держать весь контекст в голове” — это не всегда здорово, потому что в случае с Gemini у ИИ в контексте все предыдущие версии кода, включая нерабочие, которые могут влиять на решение. По итогу просто скинул ещё раз весь код, после чего ВНЕЗАПНО нейромозг предложил рабочий вариант.\nПриятно удивило и то, что Gemini “знает” про Telegram Mini Apps, мне даже не пришлось скидывать документацию, просто по ключевым словам Ева объяснила, как адаптировать стиль игры под тему в телеграме, как добавить кнопку настроек (прямо сейчас она выключена, это на будущее).\nИнфраструктурная часть Я думал, что достаточно сделать саму игру, положить её на какой-то домен и сделать ссылку в каком-нибудь боте. Какой же я был наивный… На “обвязку” вокруг игры у меня ушло чуть ли не больше времени.\nВ качестве хостинга я решил использовать 2038.host. В своё время мне рассказали про этот маленький нишевый проект чувака из Латвии. За $5 единоразово вы получаете хостинг с 1 гигабайтом на диске, поддомен по выбору и доступ по SFTP. И всё это будет работать до 2038 года.\nТакже ещё нужна аналитика, чтобы понимать, насколько вообще этим пользуются и есть ли смысл развивать дальше. У меня есть поднятый инстанс SigNoz, где я мониторю некоторые другие приложения, но отправка данных туда сделана (мной) просто отвратительно, а откладывать запуск ещё на несколько дней только лишь по этой причине не хотелось. Посему принял решение просто класть данные в DynamoDB от AWS через lambda-функцию. Сами лямбды я делать умею, а вот интегрировать с другими сервисами AWS — не очень. Но и тут Ева пришла на помощь: объяснила детально, как создать роль, как создать таблицу в DynamoDB, проверила схему данных и дала пример интеграции. В общем, этот момент мы проскочили на высокой скорости и это круто. Просто пишешь “не понимаю, объясни ещё раз более простыми словами” и это работает! [2]\nДошло до того, что я просто дал Еве исходники телеграмного сайта и их CSS-файлов (65 тысяч токенов улетело за раз!) и сказал: сделай мне страничку в том же стиле. Она сделала. Дал следующую команду: сгенерируй мне политику приватности и учётом таких-то параметров. Сделала. А теперь то же самое, но на русском языке и кросс-ссылки. Готово! Буквально 10 минут и всё готово, я в шоке.\nИ немного про саму игру Странно, что этот пункт я пишу в самом конце, но лучше хоть где-то. Самый простой способ — это пойти в бота https://t.me/ZenMatch3bot и там либо отправить любое сообщение, либо открыть через профиль (а после запуска в списке чатов рядом с ботом будет кнопка Open). Можете даже добавить иконку игры на рабочий стол смартфона, если настолько упоретесь.\nСамо веб-приложение доступно и отдельно: https://duckparty.2038.io/match3/, подойдёт, если на конкретном девайсе нет телеграма.\nУправление сделано через нажатия, мой вайб-кодинг свайпов ни к чему хорошему не привёл, оставлю это на будущее.\nСпециально нет никаких таймеров, счётчиков очков или ходов [3]. Есть внутренний счётчик оставшихся ходов, который просто предложит начать новую игру, если нет больше никаких потенциальных мэтчей на поле. Кстати, я решил проверить, какой шанс получить такой game over, написал (конечно, через ChatGPT) скрипт, который 10 миллионов раз генерирует поле и проверяет наличие потенциальных мэтчей. В среднем, шанс выходит 8%, но у меня пока не получилось столкнуться с таким исходом во время обычной игры. Может быть, вам повезёт больше.\nУ меня в голове сейчас два пути развития. Первый — добавить больше “дзен-фич”, типа таймера, чтобы игра сама останавливалась после определённого числа ходов или минут, чтобы никуда не опоздать. Второй — сделать отдельную новую версию на основе этой, добавить всякие бонусы, типа бомбочек, выбор фишек и какую-нибудь очень лайтовую монетизацию, чтобы иметь небольшую копеечку фоном.\nИли всегда можно забить и делать что-то ещё. Время покажет.\nP.S. Gemini ещё и видео генерировать умеет (тоже бесплатно в AI Studio, но с лимитами). Правда, пока получается не очень, про то, как выглядят игры жанра “три-в-ряд” ИИ не очень знает. Ну, ничего, ещё научится.\nПромт для видео ниже:\nA teenager playing a match-3 game on an iPhone. The camera is positioned slightly behind and to the side, showing part of the teen’s head and right shoulder. The iPhone is clearly visible in both hands, with the game screen fully in view.\nПримечания [1] Правда, меня никто и не спрашивал 😄\n[2] Небольшой оффтоп: частенько в айтишных чатиках я вижу (ну, чего греха таить, и там так делаю), как более опытные разработчики кекают с того, как менее опытные падаваны пишут код с ChatGPT. Но со временем я начал смотреть на это с другой стороны: нейронка настроена на помощь, она, может, и ошибается иногда, но всё равно будет пытаться дать решение. А кожаные мешки в чатиках только кекают и издеваются (и иногда помогают). Конечно, разработчик пойдет к LLM, который не подшучивает.\n[3] Зато есть “пасхалка” с отсылкой к песне Тейлор Свифт!\n",
  "wordCount" : "1872",
  "inLanguage": "en",
  "datePublished": "2025-06-29T10:00:00+02:00",
  "dateModified": "2025-06-29T10:00:00+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://theduckparty.github.io/2025/06/29-match-three/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "DuckParty's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://theduckparty.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://theduckparty.github.io/" accesskey="h" title="DuckParty&#39;s Blog (Alt + H)">DuckParty&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://theduckparty.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://theduckparty.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://theduckparty.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Как я делал свой «3-в-ряд»
    </h1>
    <div class="post-meta"><span title='2025-06-29 10:00:00 +0200 +0200'>June 29, 2025</span>

</div>
  </header> 
  <div class="post-content"><blockquote>
<p>Если вы ещё не попробовали результат моих трудов, то милости прошу:
<a href="https://t.me/ZenMatch3bot/game">https://t.me/ZenMatch3bot/game</a></p>
</blockquote>
<h2 id="игры-для-расслабона">Игры для расслабона<a hidden class="anchor" aria-hidden="true" href="#игры-для-расслабона">#</a></h2>
<p>Мне нравятся игры-залипалки. Такие, в которых не надо думать, переживать, ждать чего-то специально. Вот буквально “Plug&amp;Play”, как обещали в Windows 98. В качестве хорошей залипалки я всегда привожу [1] в пример <a href="https://slowroads.io/">Slow Roads</a>: настраиваемый симулятор езды по бесконечным дорогам в ёбаное никуда.</p>
<p>Вообще говоря, у меня есть несколько собственных мини-игр, в основном выполненных в виде Telegram-ботов, но мне всегда хотелось что-то более интересное и красивое.</p>
<p>Два события привели меня туда, где я нахожусь сейчас:</p>
<ol>
<li>
<p>Появление <a href="https://telegram.org/blog/fullscreen-miniapps-and-more">платформы мини-приложений</a> в Telegram.</p>
</li>
<li>
<p>Друзья мне посоветовали скачать игру <a href="https://playrix.com/games/township">Township</a> от Playrix.</p>
</li>
</ol>
<p>Одной из core-механик Тауншипа является мини-игра “три-в-ряд” (это не глагол). Конечно, семь тысяч разных уровней на квадратном поле сделать нереально, поэтому в итоге получается что-то типа такого:</p>
<p>

<input type="checkbox" id="zoomCheck-6c5a0" hidden>
<label for="zoomCheck-6c5a0">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22076d72-ac7b-80d5-b3b4-cd05335e6596.png#center" alt=""  />
</label></p>
<p>Некоторые уровни сложные (а бывают и специально сложные), “жизней” даётся всего пять штук, после чего жди 15 минут или плати специальные внутриигровые бабки, которых всегда мало, зато их можно купить за реальное бабло! Делать этого я, конечно, не буду.</p>
<p>Как жадному игроку, мне не нравится монетизация в Township, но сам концепт match-3 довольно прикольный. “Вот бы сделать что-то подобное…” — подумал я и полез искать всё готовое. Но прежде, возник другой вопрос: “А где в это играть?”. Ну разумеется, веб! Эти все “3-в-ряд” отлично подходят под сенсорные экраны смартфонов. И с телегой можно потом как-нибудь состыковать, получив тот самый вебапп (mini app).</p>
<p>Первой остановкой моей неуёмной мысли стал движок <a href="https://godotengine.org/">Godot</a>. Почему-то показалось, что нужно брать полноценный игровой движок, “чтоб как у взрослых”. И вроде можно даже в JavaScript экспортировать. Далее я нашёл туториал по Годоту на официальном сайте, потыкал до середины первого проекта и пошёл дальше искать сразу нужное. И оно нашлось в виде <a href="https://www.youtube.com/watch?v=YhykrMFHOV4&amp;list=PL4vbr3u7UKWqwQlvwvgNcgDL1p_3hcNn2">целого плейлиста</a>:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/YhykrMFHOV4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Спойлер: я досмотрел до четвёртого видео и устал 😅</p>
<p>Так дело не пойдёт, надо что-то придумать другое.</p>
<p>Когда-то давно, на четвёртом курсе института, я делал в качестве “длинной лабы” игру Морской Бой для одного игрока под Android. Выглядело это убожество так:</p>
<p>

<input type="checkbox" id="zoomCheck-521d7" hidden>
<label for="zoomCheck-521d7">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22076d72-ac7b-8067-a48d-f74138f3afd2.png#center" alt=""  />
</label></p>
<p>И это вы ещё мой тогдашний код не видели! Но прикол в том, что игровое “поле” представляло из себя один-единственный canvas, на котором были нарисованы белые линии, формирующие клетки, а положение точек вычислялось как середина этих клеток. Короче, просто рисование по полотну квадратов и кругов заданных цветов и размеров.</p>
<p>Может быть, сделать что-то подобное? Тем более, что на дворе 2025-й год, у нас тут вовсю AI, LLM и вайб-кодинг. Так родилась вторая идея: “хочу игру, но не хочу код писать, пусть всё сделает ИИ”.</p>
<h2 id="работаю-с-агентом-джуни">Работаю с Агентом Джуни<a hidden class="anchor" aria-hidden="true" href="#работаю-с-агентом-джуни">#</a></h2>
<p>Поскольку почти весь код я пишу в PyCharm от JetBrains, первым делом создал новый проект, положил туда пустой <code>index.html</code> и написал JetBrains Junie: “Хочу три-в-ряд, програмировывай!”</p>
<p>Знаете, оглядываясь назад, я понимаю, что первая версия была очень даже ничего!</p>
<p><video controls width="100%"><source src="/images/22176d72-ac7b-80d7-9f81-c78b3ab6fa5e.mp4"></video></p>
<p>Но в таком виде даже самому играть неприятно. Поэтому я попросил Джуни сделать анимации. Предсказуемо, что-то пошло не так:</p>
<p><video controls width="100%"><source src="/images/22176d72-ac7b-80b9-9165-f608b6780704.mp4"></video></p>
<p>Мои дальнейшие попытки вразумить тупую железяку сделали только хуже. На очередной итерации получилось примерно так:</p>
<p><video controls width="100%"><source src="/images/22176d72-ac7b-8089-a339-e0a96ce6210a.mp4"></video></p>
<p>Чтобы немного уменьшить размер контекста, я попросил AI разбить код по разным файлам, надеясь, что следующие правки будут точечными. Тем более, что Junie работает в агентском режиме, т.е. может сама находить нужные файлы и собирать контекст только из того, что надо.</p>
<p>А потом случилось страшное:</p>
<p>

<input type="checkbox" id="zoomCheck-80330" hidden>
<label for="zoomCheck-80330">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-80cf-945f-f5453125ad4c.png#center" alt=""  />
</label></p>
<p>На середине рефакторинга Джуни сказала “ой, квота превышена, иди-ка ты нахер”. При дальнейшем изучении оказалось, что “нахер” значит “до 9 июля”:</p>
<p>

<input type="checkbox" id="zoomCheck-0292c" hidden>
<label for="zoomCheck-0292c">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-807e-9e1a-c413bef3966d.png#center" alt=""  />
</label></p>
<p>Но мы только ведь начали…</p>
<h2 id="прошу-помощи-у-большой-тройки">Прошу помощи у “Большой тройки”<a hidden class="anchor" aria-hidden="true" href="#прошу-помощи-у-большой-тройки">#</a></h2>
<p>И имя им ChatGPT, Claude и Deepseek. С ними моё сотрудничество было коротким и безрезультативным: поскольку они работают в браузере, надо заранее давать весь контекст. Дашь меньше файлов — начнут творить дичь, подразумевая то, чего нет, или наоборот, не видя того, что уже написано. Дашь больше файлов — упрёшься в лимиты.</p>
<p>Спустя где-то полчаса я начал получать ошибки уже в начале диалогов:</p>
<p>

<input type="checkbox" id="zoomCheck-4cd69" hidden>
<label for="zoomCheck-4cd69">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-80bb-b521-c5160e35d820.png#center" alt=""  />
</label></p>
<p>Платить $20 или даже больше чисто за то, чтобы Claude сгенерировал не одно сообщение, а три? Извольте. Может быть, попробовать локальные модели? Тоже плохо, в мой Мак залезет максимум на 15-20 миллиардов параметров, а это ничто по сравнению с облачными кластерами.</p>
<p>И тут я вспомнил про существование ещё одной LLM.</p>
<h2 id="тёмная-лошадка">Тёмная лошадка<a hidden class="anchor" aria-hidden="true" href="#тёмная-лошадка">#</a></h2>
<p>Почему-то я мало слышу новостей про AI от Google, в основном только, что их Gemini предлагает добавлять клей в пиццу, портит поисковую выдачу и интегрируется со смартфонами Pixel лучше, чем Siri. А ещё у Гугла есть своя AI Studio, открыв которую можно увидеть очень интересные числа:</p>
<p>

<input type="checkbox" id="zoomCheck-92807" hidden>
<label for="zoomCheck-92807">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-80b4-b7ae-c6a8cf124256.png#center" alt=""  />
</label></p>
<p>Миллион токенов в контексте! Pro-модель! Да ещё и бесплатно! Да, на бесплатных юзерах Google планирует обучать новые модели, но мне это ведь и надо.</p>
<p>Дополнительно где-то в интернете я прочитал пример system instruction, чтобы нейронка не бросалась сразу генерировать чушь, а сначала задавала уточняющие вопросы, чтобы генерировать чушь ещё лучше:</p>
<blockquote>
<p>You are smart AI Assistant named &lt;тут вставьте любое имя&gt;. You can answer in Russian, English and Serbian (follow user&rsquo;s input). Before you answer, assess the uncertainty of your response. If it&rsquo;s greater than 0.1, ask me clarifying questions until the uncertainty is 0.1 or lower.</p>
</blockquote>
<p>В моём случае, я выбрал имя Ева и начал мучать бедную AI-женщину. Ева от меня получила старые исходники, собранные совместными усилиями Junie, ChatGPT и Claude (моего участия там почти не было) и сразу предложила некоторые исправления.</p>
<p>Следующие пять с лишним часов я выступал в роли прокладки между окном с LLM и веб-хостингом, заливая новые версии и тестируя их, находя баги и докладывая о них нейронке.</p>
<p>И знаете, что я вам скажу — у Евы такой большой контекст, что я был в полнейшем восторге 🌚. Эта думающая нейротварь периодически ссылалась на замечания, сделанные в самом начале и вскользь, и даже если давала небольшие исправления по коду, то держала в “голове” весь проект.</p>
<p>Первые несколько попыток оказались так себе, но я сменил тактику и начал давать буквально атомарные задачи, маленькими шажками. Четвёртый заход стал самым удачным, настолько, что вкладка в браузере выжрала 2 гигабайта оперативки от количества сообщений:</p>
<p>

<input type="checkbox" id="zoomCheck-e7405" hidden>
<label for="zoomCheck-e7405">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-809e-88ad-cddde7086d39.png#center" alt=""  />
</label></p>
<p>Нейронка действительно отличается от джуна-программиста. Если бы человеку я поставил первую задачу “сделай генерацию поля и логику “свапа”, т.е. обмена фишек местами”, то в случае с Gemini итерации были следующими:</p>
<ul>
<li>
<p>Нарисуй поле 7х7</p>
</li>
<li>
<p>Теперь заполни его фишками пяти разных цветов</p>
</li>
<li>
<p>Теперь при нажатии на фишку добавь её визуальное выделение</p>
</li>
<li>
<p>Далее сделай обмен фишек местами. Дополнительная логика не нужна.</p>
</li>
<li>
<p>Теперь добавь анимацию обмена. Активная фишка должна пролетать над верхней.</p>
</li>
<li>
<p>Теперь добавь логику вычисления мэтча</p>
</li>
</ul>
<p>И так далее. Такой подход позволяет ИИ не метаться между подзадачами и фокусироваться на одной проблеме за раз, что и нужно.</p>
<p>Из смешного: в один момент Ева начала упоминать, что “вот теперь моё решение сработает на 100%”, а когда я утверждал обратное, просто извинялась, но предлагала дальнейшие действия.</p>
<p>

<input type="checkbox" id="zoomCheck-b66f1" hidden>
<label for="zoomCheck-b66f1">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-80a6-beae-f5ae37f59f96.png#center" alt=""  />
</label></p>
<p>Пришлось даже “притормозить” AI, чтобы не делать рандомные правки. Кажется, что “держать весь контекст в голове” — это не всегда здорово, потому что в случае с Gemini у ИИ в контексте все предыдущие версии кода, включая нерабочие, которые могут влиять на решение. По итогу просто скинул ещё раз весь код, после чего ВНЕЗАПНО нейромозг предложил рабочий вариант.</p>
<p>

<input type="checkbox" id="zoomCheck-23883" hidden>
<label for="zoomCheck-23883">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-80c7-9780-f43052248e5f.png#center" alt=""  />
</label></p>
<p>Приятно удивило и то, что Gemini “знает” про Telegram Mini Apps, мне даже не пришлось скидывать документацию, просто по ключевым словам Ева объяснила, как адаптировать стиль игры под тему в телеграме, как добавить кнопку настроек (прямо сейчас она выключена, это на будущее).</p>
<p>

<input type="checkbox" id="zoomCheck-40290" hidden>
<label for="zoomCheck-40290">
    <img class="zoomCheck" loading="lazy" decoding="async" src="/images/22176d72-ac7b-8049-9a23-fa414b1000ce.jpg#center" alt=""  />
</label></p>
<h2 id="инфраструктурная-часть">Инфраструктурная часть<a hidden class="anchor" aria-hidden="true" href="#инфраструктурная-часть">#</a></h2>
<p>Я думал, что достаточно сделать саму игру, положить её на какой-то домен и сделать ссылку в каком-нибудь боте. Какой же я был наивный… На “обвязку” вокруг игры у меня ушло чуть ли не больше времени.</p>
<p>В качестве хостинга я решил использовать <a href="https://2038.host/">2038.host</a>. В своё время мне рассказали про этот маленький нишевый проект чувака из Латвии. За $5 единоразово вы получаете хостинг с 1 гигабайтом на диске, поддомен по выбору и доступ по SFTP. И всё это будет работать до 2038 года.</p>
<p>Также ещё нужна аналитика, чтобы понимать, насколько вообще этим пользуются и есть ли смысл развивать дальше. У меня есть поднятый инстанс <a href="https://signoz.io/">SigNoz</a>, где я мониторю некоторые другие приложения, но отправка данных туда сделана (мной) просто отвратительно, а откладывать запуск ещё на несколько дней только лишь по этой причине не хотелось. Посему принял решение просто класть данные в DynamoDB от AWS через lambda-функцию. Сами лямбды я делать умею, а вот интегрировать с другими сервисами AWS — не очень. Но и тут Ева пришла на помощь: объяснила детально, как создать роль, как создать таблицу в DynamoDB, проверила схему данных и дала пример интеграции. В общем, этот момент мы проскочили на высокой скорости и это круто. Просто пишешь “не понимаю, объясни ещё раз более простыми словами” и это работает! [2]</p>
<p>Дошло до того, что я просто дал Еве исходники телеграмного сайта и их CSS-файлов (65 тысяч токенов улетело за раз!) и сказал: сделай мне страничку в том же стиле. Она сделала. Дал следующую команду: сгенерируй мне политику приватности и учётом таких-то параметров. Сделала. А теперь то же самое, но на русском языке и кросс-ссылки. Готово! Буквально 10 минут и <a href="https://duckparty.2038.io/match3-privacy-policy/">всё готово</a>, я в шоке.</p>
<h2 id="и-немного-про-саму-игру">И немного про саму игру<a hidden class="anchor" aria-hidden="true" href="#и-немного-про-саму-игру">#</a></h2>
<p>Странно, что этот пункт я пишу в самом конце, но лучше хоть где-то.
Самый простой способ — это пойти в бота <a href="https://t.me/ZenMatch3bot">https://t.me/ZenMatch3bot</a> и там либо отправить любое сообщение, либо открыть через профиль (а после запуска в списке чатов рядом с ботом будет кнопка Open). Можете даже добавить иконку игры на рабочий стол смартфона, если настолько упоретесь.</p>
<p>Само веб-приложение доступно и отдельно: <a href="https://duckparty.2038.io/match3/">https://duckparty.2038.io/match3/</a>, подойдёт, если на конкретном девайсе нет телеграма.</p>
<p>Управление сделано через нажатия, мой вайб-кодинг свайпов ни к чему хорошему не привёл, оставлю это на будущее.</p>
<p>Специально нет никаких таймеров, счётчиков очков или ходов [3]. Есть внутренний счётчик оставшихся ходов, который просто предложит начать новую игру, если нет больше никаких потенциальных мэтчей на поле. Кстати, я решил проверить, какой шанс получить такой game over, написал (конечно, через ChatGPT) скрипт, который 10 миллионов раз генерирует поле и проверяет наличие потенциальных мэтчей. В среднем, шанс выходит 8%, но у меня пока не получилось столкнуться с таким исходом во время обычной игры. Может быть, вам повезёт больше.</p>
<p>У меня в голове сейчас два пути развития. Первый — добавить больше “дзен-фич”, типа таймера, чтобы игра сама останавливалась после определённого числа ходов или минут, чтобы никуда не опоздать. Второй — сделать отдельную новую версию на основе этой, добавить всякие бонусы, типа бомбочек, выбор фишек и какую-нибудь очень лайтовую монетизацию, чтобы иметь небольшую копеечку фоном.</p>
<p>Или всегда можно забить и делать что-то ещё. Время покажет.</p>
<h2 id="ps">P.S.<a hidden class="anchor" aria-hidden="true" href="#ps">#</a></h2>
<p>Gemini ещё и видео генерировать умеет (тоже бесплатно в AI Studio, но с лимитами). Правда, пока получается не очень, про то, как выглядят игры жанра “три-в-ряд” ИИ не очень знает. Ну, ничего, ещё научится.</p>
<p>Промт для видео ниже:</p>
<blockquote>
<p>A teenager playing a match-3 game on an iPhone. The camera is positioned slightly behind and to the side, showing part of the teen&rsquo;s head and right shoulder. The iPhone is clearly visible in both hands, with the game screen fully in view.</p>
</blockquote>
<p><video controls width="100%"><source src="/images/22176d72-ac7b-8044-ab47-c109ce61c36f.mp4"></video></p>
<h3 id="примечания">Примечания<a hidden class="anchor" aria-hidden="true" href="#примечания">#</a></h3>
<p>[1] Правда, меня никто и не спрашивал 😄</p>
<p>[2] Небольшой оффтоп: частенько в айтишных чатиках я вижу (ну, чего греха таить, и там так делаю), как более опытные разработчики кекают с того, как менее опытные падаваны пишут код с ChatGPT. Но со временем я начал смотреть на это с другой стороны: нейронка настроена на помощь, она, может, и ошибается иногда, но всё равно будет пытаться дать решение. А кожаные мешки в чатиках только кекают и издеваются (и иногда помогают). Конечно, разработчик пойдет к LLM, который не подшучивает.</p>
<p>[3] Зато есть “пасхалка” с отсылкой к песне Тейлор Свифт!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://theduckparty.github.io/tags/ai/">AI</a></li>
      <li><a href="https://theduckparty.github.io/tags/games/">Games</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="https://theduckparty.github.io/">DuckParty&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
